(function(e){function t(t){for(var a,o,r=t[0],l=t[1],c=t[2],d=0,m=[];d<r.length;d++)o=r[d],s[o]&&m.push(s[o][0]),s[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);u&&u(t);while(m.length)m.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,r=1;r<n.length;r++){var l=n[r];0!==s[l]&&(a=!1)}a&&(i.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},s={app:0},i=[];function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=t,r=r.slice();for(var c=0;c<r.length;c++)t(r[c]);var u=l;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"04b0":function(e,t,n){},"139c":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("7bc1"),n("7364"),n("dac5"),n("6e26"),n("9604"),n("df67");var a=n("6e6d"),s=n("56be"),i=n.n(s),o=n("1e6f"),r=n("facc"),l=n.n(r),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("link",{attrs:{rel:"stylesheet",type:"text/css",href:"//at.alicdn.com/t/font_1223661_y3rujt2k0ho.css"}}),n("router-view")],1)},u=[],d={name:"App"},m=d,p=n("17cc"),f=Object(p["a"])(m,c,u,!1,null,null,null),h=f.exports,g=(n("f763"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"meg-message"},[n("div",{staticClass:"info"},[n("megTitle",[e._v("用户信息")]),n("div",{staticClass:"content"},[n("el-scrollbar",[n("el-timeline",e._l(e.userInfo,function(t,a){return n("el-timeline-item",{key:a,attrs:{timestamp:e.dayToStr(t.push_time),placement:"top"}},[n("el-card",{attrs:{shadow:"hover"}},[n("p",[e._v(e._s(t.content))])])],1)}),1)],1)],1)],1),n("div",{staticClass:"divider"}),n("div",{staticClass:"info"},[n("megTitle",[e._v("系统信息")]),n("div",{staticClass:"content"},[n("el-scrollbar",[n("el-timeline",e._l(e.systemInfo,function(t,a){return n("el-timeline-item",{key:a,attrs:{timestamp:e.dayToStr(t.push_time),placement:"top"}},[n("el-card",{attrs:{shadow:"hover"}},[n("p",[e._v(e._s(t.content))])])],1)}),1)],1)],1)],1)])}),b=[],v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"meg-title"},[n("span",[e._t("default")],2)])},_=[],y={name:"MegTitle"},w=y,k=Object(p["a"])(w,v,_,!1,null,null,null),S=k.exports,C=n("ac59"),x=n.n(C),I={methods:{formatterDateTime:function(e,t,n){return this.dayToStr(n)},dayToStr:function(e){return x()(e).format("YYYY-MM-DD HH:mm:ss")},dateToStr:function(e){return x()(e).format("YYYY-MM-DD")}}},$={name:"Message",components:{megTitle:S},mixins:[I],data:function(){return{userInfo:[],systemInfo:[]}},mounted:function(){var e=this;this.$service.message.getMessages({user_id:this.$store.getters["user/getUserInfo"].id}).then(function(t){console.log(t),e.userInfo=t.data.user_msgs,e.systemInfo=t.data.sys_msgs}).catch(function(e){console.log(e)})}},T=$,D=Object(p["a"])(T,g,b,!1,null,null,null),N=D.exports,F=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"meg-layout"},[n("layoutTitle"),n("div",{staticClass:"meg-bottom"},[n("layoutMenu"),n("div",{staticClass:"meg-page"},[n("router-view")],1)],1)],1)},P=[],M=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"meg-menu"},[n("el-menu",{attrs:{"default-active":e.active}},e._l(e.menuCfg,function(t){return n("el-menu-item",{key:t.index,attrs:{index:t.index+""},on:{click:function(n){return e.openPage(t.router)}}},[n("i",{staticClass:"iconfont",class:t.icon}),n("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.name))])])}),1)],1)},O=[],U={name:"Menu",data:function(){return{active:"0"}},computed:{menuCfg:function(){return this.$store.getters["menu/getMenuList"]}},mounted:function(){this.active=this.menuCfg[0].index+"",this.$router.push(this.menuCfg[0].router)},methods:{openPage:function(e){this.$router.push({name:e})}}},V=U,A=Object(p["a"])(V,M,O,!1,null,null,null),E=A.exports,L=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},j=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"title"},[n("div",{staticClass:"logo"}),n("div",{staticClass:"text"},[e._v("\n    旷视软件客户服务中心\n  ")])])}],R={},z=R,B=Object(p["a"])(z,L,j,!1,null,null,null),q=B.exports,H={name:"Layout",components:{layoutMenu:E,layoutTitle:q}},K=H,Y=Object(p["a"])(K,F,P,!1,null,null,null),G=Y.exports,W=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dbv1"},[n("div",{staticClass:"login-container db v"},[n("div",{staticClass:"login-title"},[n("div",{staticClass:"login-logo"}),n("div",{staticClass:"login-text"},[e._v("\n        旷视软件客户服务中心\n      ")]),n("div",{staticClass:"fx1"}),n("div",{staticClass:"lang-buttom"},[n("div",{class:{on:e.langCn},on:{click:function(t){e.lang="zh-CN"}}},[n("span",[e._v("中")])]),n("div",{staticClass:"en",class:{on:!e.langCn},on:{click:function(t){e.lang="en-US"}}},[n("span",[e._v("En")])])])]),e.login?n("div",{staticClass:"login-form"},[n("div",{staticClass:"login-form-right",on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}}},[n("div",{staticClass:"title"},[n("span",[e._v(e._s(e.$t("login.userLogin")))])]),n("div",{staticClass:"login-form-title"},[e._v("\n          "+e._s(e.$t("login.userName"))+"\n        ")]),n("div",{staticClass:"login-form-input username-input"},[n("el-input",{attrs:{placeholder:"请输入用户名",autofocus:"",clearable:"","prefix-icon":"iconfont icon-username"},model:{value:e.loginForm.uname,callback:function(t){e.$set(e.loginForm,"uname",t)},expression:"loginForm.uname"}})],1),n("div",{staticClass:"login-form-title password"},[e._v("\n          "+e._s(e.$t("login.password"))+"\n        ")]),n("div",{staticClass:"login-form-input password-input"},[n("el-input",{attrs:{placeholder:"请输入密码",type:"password",clearable:"","prefix-icon":"iconfont icon-password"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),n("div",{staticClass:"login-confirm",on:{click:e.handleLogin}},[e._v("\n          "+e._s(e.$t("login.login"))+"\n        ")]),e.isShowAdminLoginBtn?n("div",{staticClass:"inter-login",on:{click:e.megviiLogin}},[e._v("\n          内部登录\n        ")]):e._e(),n("el-popover",{attrs:{placement:"bottom-end",width:"200",trigger:"click"}},[n("ol",[e._v("1、确认你的邮箱和密码输入正确")]),n("ol",[e._v("2、联系旷视商务，修改您绑定的手机号码")]),n("el-button",{staticClass:"tip",attrs:{slot:"reference",type:"text"},slot:"reference"},[e._v("\n            "+e._s(e.$t("login.forgotPassword"))+"？\n          ")])],1)],1)]):n("div",{staticClass:"login-form"},[n("div",{staticClass:"phone-verify",on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleVerify(t)}}},[n("div",{staticClass:"login-form-title"},[e._v("\n          验证码\n        ")]),n("el-row",[n("el-col",{attrs:{span:12}},[n("el-input",{attrs:{maxlength:"6",placeholder:"请输6位入验证码"},model:{value:e.verifyNumber,callback:function(t){e.verifyNumber=t},expression:"verifyNumber"}})],1),n("el-col",{attrs:{span:10,offset:2}},[n("el-button",{attrs:{type:"text",disabled:!e.timeOver},on:{click:e.reVerifyNumber}},[e._v("\n              "+e._s(e.verifyText)+"\n            ")])],1)],1),n("el-button",{staticClass:"mt",attrs:{type:"primary"},on:{click:e.handleVerify}},[e._v("\n          确认登录\n        ")]),n("el-popover",{attrs:{placement:"bottom-end",width:"200",trigger:"click"}},[n("ol",[e._v("1、确认你的手机短信功能正常")]),n("ol",[e._v("2、联系旷视商务，修改您绑定的手机号码")]),n("el-button",{staticClass:"tip",attrs:{slot:"reference",type:"text"},slot:"reference"},[e._v("\n            没有收到验证码？\n          ")])],1)],1)])])])},J=[],Q=n("e20c"),X=n("4f45"),Z={setStore:function(e,t){e&&("string"!==typeof t&&(t=JSON.stringify(t)),window.localStorage.setItem(e,t))},getStore:function(e){if(!e)return null;var t=null;try{t=JSON.parse(window.localStorage.getItem(e))}catch(n){t=window.localStorage.getItem(e)}return t},removeStore:function(e){if(!e)return null;window.localStorage.removeItem(e)}},ee={name:"Login",data:function(){return{lang:Z.getStore("lang")||"zh-CN",loginForm:{uname:"",password:""},verifyNumber:"",sec:60,login:!0,isShowAdminLoginBtn:!!this.$route.query.is_admin}},computed:{verifyText:function(){var e="";return e=this.timeOver?"重新获取":"".concat(this.sec," s 之后重新获取"),e},timeOver:function(){return 0===this.sec},langCn:function(){return"zh-CN"===this.lang}},watch:{login:function(e){e||this.start()},lang:function(e){Z.setStore("lang",e),this.$i18n.locale=e}},beforeRouteEnter:function(e,t,n){"home"===t.name?n():n(function(e){e.$router.push({name:"home"})})},methods:{handleLogin:function(){var e=this;this.enterSystem(),this.$service.login.login(this.loginForm).then(function(t){var n=t.data;e.$store.commit("user/setUserInfo",{id:n.user_id}),n.login_ok?e.$cookies.get("megvii_user")?(e.$store.commit("user/setUserRole",{role_id:1}),e.$router.push({name:"log"})):(e.$store.commit("user/setUserRole",{role_id:2}),t.data.need_short_msg?(e.login=!1,e.getShortMessage()):e.enterSystem()):(s["Message"].closeAll(),e.$message.warning("用户名或密码错误！")),console.log(t)})},enterSystem:function(){var e=this.$store.getters["menu/getMenuList"][0].router;this.$router.push({name:e})},handleVerify:function(){var e=this;this.$service.login.loginShortMessage(Object(Q["a"])({},this.loginForm,{short_msg:this.verifyNumber})).then(function(t){t.data.short_msg_ok?e.enterSystem():(s["Message"].closeAll(),e.$message.warning("验证码错误！"))})},getShortMessage:function(){var e=this;this.$service.login.getShortMessage(this.loginForm).then(function(t){t.data.short_msg_snd_ok&&e.$message.success("短信发送成功")})},start:function(){var e=this;e.sec=60,e.timer=Object(X["setInterval"])(function(){e.sec>0?e.sec--:Object(X["clearInterval"])(e.timer)},1e3)},reVerifyNumber:function(){this.verifyNumber="",this.start(),this.getShortMessage()}}},te=ee,ne=Object(p["a"])(te,W,J,!1,null,null,null),ae=ne.exports,se=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"meg-user-info"},[n("megTitle",[e._v("账户信息修改")]),n("el-form",{ref:"form",attrs:{rules:e.rules,model:e.ruleForm,"label-position":"left","label-width":"100px"}},[n("el-form-item",{attrs:{label:"名称",prop:"userName"}},[n("el-input",{attrs:{disabled:!0},model:{value:e.ruleForm.userName,callback:function(t){e.$set(e.ruleForm,"userName",t)},expression:"ruleForm.userName"}})],1),n("el-form-item",{attrs:{label:"当前密码",prop:"oldPwd"}},[n("el-input",{attrs:{type:"password"},model:{value:e.ruleForm.oldPwd,callback:function(t){e.$set(e.ruleForm,"oldPwd",t)},expression:"ruleForm.oldPwd"}})],1),n("el-form-item",{attrs:{label:"新密码",prop:"newPwd"}},[n("el-input",{attrs:{type:"password"},model:{value:e.ruleForm.newPwd,callback:function(t){e.$set(e.ruleForm,"newPwd",t)},expression:"ruleForm.newPwd"}})],1),n("el-form-item",{attrs:{label:"确认新密码",prop:"confirmPwd"}},[n("el-input",{attrs:{type:"password"},model:{value:e.ruleForm.confirmPwd,callback:function(t){e.$set(e.ruleForm,"confirmPwd",t)},expression:"ruleForm.confirmPwd"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.changePassword}},[e._v("\n        确认修改密码\n      ")])],1)],1),n("megTitle",{staticClass:"mt40"},[e._v("\n    绑定信息(只读）\n  ")]),n("el-form",{attrs:{"label-width":"100px","label-position":"left"}},[n("el-form-item",{attrs:{label:"绑定邮箱"}},[n("el-input",{attrs:{disabled:!0},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),n("el-form-item",{attrs:{label:"绑定手机"}},[n("el-input",{attrs:{disabled:!0},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1),n("el-form-item",{attrs:{label:"公司名称"}},[n("el-input",{attrs:{disabled:!0},model:{value:e.company,callback:function(t){e.company=t},expression:"company"}})],1)],1),n("el-alert",{attrs:{"show-icon":"",title:"如有修改账户绑定信息的需求，请联系商务",type:"info",closable:!1}}),e.editVisible?n("editPassword",{attrs:{visible:e.editVisible},on:{"update:visible":function(t){e.editVisible=t}}}):e._e()],1)},ie=[],oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:"修改密码",visible:e.visible,width:"500px","before-close":e.handleClose},on:{"update:visible":function(t){e.visible=t}}},[n("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"当前密码",prop:"oldPassword"}},[n("el-input",{model:{value:e.form.oldPassword,callback:function(t){e.$set(e.form,"oldPassword",t)},expression:"form.oldPassword"}})],1),n("el-form-item",{attrs:{label:"新密码",prop:"newPassword"}},[n("el-input",{model:{value:e.form.newPassword,callback:function(t){e.$set(e.form,"newPassword",t)},expression:"form.newPassword"}})],1),n("el-form-item",{attrs:{label:"确认新密码",prop:"newPasswordConfirm"}},[n("el-input",{model:{value:e.form.newPasswordConfirm,callback:function(t){e.$set(e.form,"newPasswordConfirm",t)},expression:"form.newPasswordConfirm"}})],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.handleClose}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.enter}},[e._v("确 定")])],1)],1)},re=[],le={name:"EditPassword",props:{visible:{type:Boolean,default:function(){return!1}},userId:{type:String,default:""},form:{type:Object,default:function(){return{oldPassword:"",newPassword:"",newPasswordConfirm:""}}}},data:function(){return{rules:{oldPassword:[{required:!0,message:"请输入当前密码",trigger:"blur"}],newPassword:[{required:!0,message:"请输入密码",trigger:"blur"}],newPasswordConfirm:[{required:!0,message:"请再次确认密码",trigger:"blur"}]}}},methods:{handleClose:function(){this.$emit("update:visible",!1)},enter:function(){this.$refs.form.validate(function(){})}}},ce=le,ue=Object(p["a"])(ce,oe,re,!1,null,null,null),de=ue.exports,me={name:"UserInfo",components:{megTitle:S,editPassword:de},data:function(){return{editVisible:!1,ruleForm:{oldPwd:"",newPwd:"",confirmPwd:"",userName:""},email:"",phone:"",company:"",rules:{oldPwd:[{required:!0,message:"请输入当前密码",trigger:"blur"}],newPwd:[{required:!0,message:"请输入新密码",trigger:"blur"}],confirmPwd:[{required:!0,message:"请确认新秘密",trigger:"blur"}]}}},computed:{userId:function(){return this.$store.getters["user/getUserInfo"].id}},mounted:function(){var e=this;this.$service.userInfo.getUserInfo({user_id:this.userId}).then(function(t){console.log(t),e.ruleForm.userName=t.data.name,e.email=t.data.email,e.phone=t.data.phone_number,e.company=t.data.company_name}).catch(function(e){console.log(e)})},methods:{changePassword:function(){var e=this;this.$refs.form.validate(function(t){t&&(e.ruleForm.newPwd!==e.ruleForm.confirmPwd?e.$message.warning("两次输入的密码不一样！"):e.$service.userInfo.editUserInfo({user_id:e.userId,new_pwd:e.ruleForm.newPwd,current_pwd:e.ruleForm.oldPwd}).then(function(){e.$message.success("修改成功！")}).catch(function(){e.$message.warning("当前密码错误！")}))})}}},pe=me,fe=Object(p["a"])(pe,se,ie,!1,null,null,null),he=fe.exports,ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"meg-download-center"},[n("megTitle",{staticClass:"mb20"},[e._v("\n    下载中心\n  ")]),n("downSoft",{attrs:{softType:"downloadCenter",consumerId:e.consumerId}})],1)},be=[],ve=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"meg-down-soft"},[n("div",{staticClass:"top"},[n("el-radio-group",{attrs:{size:"medium"},model:{value:e.version,callback:function(t){e.version=t},expression:"version"}},[n("el-radio-button",{attrs:{label:"New"}},[e._v("\n        最新正式版本\n      ")]),n("el-radio-button",{attrs:{label:"NewTest"}},[e._v("\n        最新测试版本\n      ")]),n("el-radio-button",{attrs:{label:"His"}},[e._v("\n        所有历史版本\n      ")])],1),e._t("default")],2),n("div",{staticClass:"buttom"},[n("div",{staticClass:"left"},[n("software",{ref:"software",attrs:{list:e.softList,showNameSpace:e.showNameSpace},on:{initSuccess:e.initNameSpaceSuccess,changeNameSpace:e.changeNameSpace,clickItem:e.clickSoft}})],1),n("div",{staticClass:"mr20"}),n("div",{staticClass:"right"},[n("version",{attrs:{check:e.check,tableData:e.tableData,pushToUser:e.pushToUser},on:{pushToUserFun:e.pushToUserFun,handleSelectionChange:e.handleSelectionChange}})],1)])])},_e=[],ye=(n("d4d5"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-card",{staticClass:"meg-software",attrs:{shadow:"never"}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[e._v("产品列表")])]),e.showNameSpace?n("el-input",{staticClass:"mb20",attrs:{placeholder:"请输入产品名称",size:"medium"},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}},[n("el-select",{attrs:{slot:"prepend",placeholder:"请选择分区"},on:{change:e.changeNameSpace},slot:"prepend",model:{value:e.nameSpaceValue,callback:function(t){e.nameSpaceValue=t},expression:"nameSpaceValue"}},e._l(e.nameSpaces,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1):e._e(),n("el-scrollbar",e._l(e.showList,function(t){return n("div",{key:t.id,staticClass:"item",class:{on:t.id===e.ckeckedId},on:{click:function(n){return e.clickItem(t)}}},[e._v("\n      "+e._s(t.sdk_type_name)+"\n    ")])}),0)],1)}),we=[],ke={name:"Software",props:{list:{type:Array,default:function(){return[]}},showNameSpace:{type:Boolean,default:!1}},data:function(){return{nameSpaceValue:-1,text:"",ckeckedId:-1,nameSpaces:[]}},computed:{showList:function(){var e=this,t=[];return t=""===this.text?this.list:this.list.filter(function(t){return t.sdk_type_name.indexOf(e.text)>-1}),t},adminId:function(){return this.$store.getters["user/getUserInfo"].id}},watch:{nameSpaces:{handler:function(e){var t=-1;e.length>0&&(t=e[0].id),this.nameSpaceValue=t},immediate:!0}},mounted:function(){this.showNameSpace&&this.initNameSpace()},methods:{clickItem:function(e){this.ckeckedId=e.id,this.$emit("clickItem",e)},clearCheck:function(){this.ckeckedId=-1},changeNameSpace:function(e){this.$emit("changeNameSpace",e)},initNameSpace:function(){var e=this;this.$service.namespaceManage.getList({admin_id:this.adminId}).then(function(t){e.nameSpaces=t.data||[],e.nameSpaces.length>0&&e.$emit("initSuccess",e.nameSpaces)})}}},Se=ke,Ce=Object(p["a"])(Se,ye,we,!1,null,null,null),xe=Ce.exports,Ie=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[e._v("选择版本")])]),[n("el-scrollbar",[n("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:e.tableData},on:{"selection-change":e.handleSelectionChange}},[e.check?n("el-table-column",{attrs:{type:"selection",width:"55"}}):e._e(),n("el-table-column",{attrs:{prop:"sdk_version",label:"版本号"}}),n("el-table-column",{attrs:{prop:"release_version_type",label:"版本类型"}}),n("el-table-column",{attrs:{prop:"updated_time",formatter:e.formatterDateTime,label:"更新时间"}}),n("el-table-column",{attrs:{prop:"sdk_download_url",label:"下载地址"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticClass:"c-light pointer",attrs:{type:"text"},on:{click:function(n){return e.download(t.row)}}},[e._v("\n              点击下载\n            ")])]}}])}),e.pushToUser?n("el-table-column",{attrs:{prop:"name",label:"推送客户"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticClass:"c-light pointer",attrs:{type:"text"},on:{click:function(n){return e.pushToUserFun(t.row)}}},[e._v("\n              点击推送\n            ")])]}}],null,!1,281553062)}):e._e()],1)],1)]],2)},$e=[],Te={name:"Version",mixins:[I],props:{tableData:{type:Array,default:function(){return[]}},check:{type:Boolean,default:!1},pushToUser:{type:Boolean,default:!1}},data:function(){return{multipleSelection:[],version:1}},computed:{adminId:function(){return this.$store.getters["user/getUserInfo"].id}},methods:{download:function(e){this.$service.downloadCenter.download({admin_id:this.adminId,sdk_id:e.id})},pushToUserFun:function(e){this.$emit("pushToUserFun",e)},handleSelectionChange:function(e){this.multipleSelection=e,this.$emit("handleSelectionChange",e)}}},De=Te,Ne=Object(p["a"])(De,Ie,$e,!1,null,null,null),Fe=Ne.exports,Pe={name:"DownSoft",components:{software:xe,version:Fe},props:{adminId:{type:Number,default:0},consumerId:{type:Number,default:0},pushToUser:{type:Boolean,default:!1},check:{type:Boolean,default:!1},showNameSpace:{type:Boolean,default:!1},softType:{type:String,default:""},push:{type:String,default:"pushed"}},data:function(){return{softList:[],nameSpaces:[],version:"New",tableData:[],sdkTypeId:-1,nameSpaceId:-1}},computed:{sdkTypeParam:function(){return{consumer_id:this.consumerId,admin_id:this.adminId,push:this.push,namespaces_id:this.nameSpaceId}},sdkParam:function(){return{consumer_id:this.consumerId,sdk_type_id:this.sdkTypeId,admin_id:this.adminId,push:this.push,namespaces_id:this.nameSpaceId}},isNew:function(){return"New"===this.version||"NewTest"===this.version}},watch:{version:function(){this.$refs.software.clearCheck(),this.getData()},consumerId:function(){this.getData()}},mounted:function(){this.getData()},methods:{pushToUserFun:function(e){this.$emit("pushToUserFun",e)},handleSelectionChange:function(e){this.$emit("handleSelectionChange",e)},getData:function(){var e=this;this.$service[this.softType]["getSdktTypes"+this.version](this.sdkTypeParam).then(function(t){var n=e.addId(t.data||[]);e.initSdkData(n)})},initSdkData:function(e){this.softList=e,this.isNew?this.tableData=e:this.clickSoft(this.softList[0]||null)},clickSoft:function(e){var t=this;e?(this.sdkTypeId=e.sdk_type_id,this.isNew?this.tableData=[e]:this.$service[this.softType].getSdkHis(this.sdkParam).then(function(e){t.tableData=t.addId(e.data||[])})):this.tableData=[]},addId:function(e){return e.forEach(function(e){e.id=e.sdk_id||e.sdk_type_id}),e},initNameSpaceSuccess:function(e){this.nameSpaceId=e[0].id,this.getData()},changeNameSpace:function(e){this.nameSpaceId=e,this.getData()}}},Me=Pe,Oe=Object(p["a"])(Me,ve,_e,!1,null,null,null),Ue=Oe.exports,Ve={name:"DownloadCenter",components:{megTitle:S,downSoft:Ue},data:function(){return{activeName:"soft",tableData:[]}},computed:{consumerId:function(){return this.$store.getters["user/getUserInfo"].id}},methods:{download:function(){}}},Ae=Ve,Ee=Object(p["a"])(Ae,ge,be,!1,null,null,null),Le=Ee.exports,je=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"meg-statistical"},[n(e.thisPage,{ref:"thisRef",tag:"component",attrs:{isAdmin:e.isAdmin,showTitle:e.showTitle,consumerId:e.consumerId,softInfo:e.checkRow},on:{jump:e.jump}})],1)},Re=[],ze=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"meg-statistical"},[n("megTitle",{directives:[{name:"show",rawName:"v-show",value:e.showTitle,expression:"showTitle"}],staticClass:"mb20"},[e._v("\n    授权统计\n  ")]),n("el-scrollbar",[n("el-table",{attrs:{data:e.tableData,border:""}},[n("el-table-column",{attrs:{label:"产品名称",width:"300px",prop:"sdk_type_name"}}),n("el-table-column",{attrs:{label:"产品类型",prop:"contract_type",formatter:e.formatter}}),n("el-table-column",{attrs:{label:"单次授权有效期（天）",prop:"authorized_days"}}),n("el-table-column",{attrs:{label:"已激活次数",prop:"activated_count"}}),n("el-table-column",{attrs:{label:"剩余激活次数",prop:"remaining_count"}}),n("el-table-column",{attrs:{label:"授权消耗详情",prop:"id"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticClass:"c-light pointer",attrs:{type:"text"},on:{click:function(n){return e.jump("consumption",t.row)}}},[e._v("\n            点击查看\n          ")])]}}])}),n("el-table-column",{attrs:{label:"授权变更详情",prop:"id"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticClass:"c-light pointer",attrs:{type:"text"},on:{click:function(n){return e.jump("authChange",t.row)}}},[e._v("\n            点击查看\n          ")])]}}])}),n("el-table-column",{attrs:{label:"通信认证文件",prop:"id"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticClass:"c-light pointer",attrs:{type:"text"},on:{click:function(n){return e.jump("certificate",t.row)}}},[e._v("\n            点击查看\n          ")])]}}])})],1)],1)],1)},Be=[],qe={methods:{getLabelByVal:function(e,t){var n=this.$t("select.".concat(e)).filter(function(e){return t===e.value});return n.length>0?n[0].label:""}}},He={name:"Statistic",components:{megTitle:S},mixins:[qe],props:{showTitle:{type:Boolean,default:!0},consumerId:{type:Number,default:null}},data:function(){return{thisPage:"statistic",tableData:[]}},mounted:function(){this.getData()},methods:{formatter:function(e){return this.getLabelByVal("contractType",e.contract_type)},handleClick:function(){console.log(123)},jump:function(e,t){this.$emit("jump",e,t)},getData:function(){var e=this;this.$service.statistical.getStatisticallist({consumer_id:this.consumerId}).then(function(t){e.tableData=t.data||[]})}}},Ke=He,Ye=Object(p["a"])(Ke,ze,Be,!1,null,"35e53eb2",null),Ge=Ye.exports,We=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dbv1"},[n("megReturn",{on:{click:function(t){return e.jump("statistical")}}},[e._v("\n    返回统计表\n  ")]),n("div",{staticClass:"db mb20"},[n("div",{staticClass:"fx1"}),e.isAdmin?n("el-button",{attrs:{size:"medium",type:"primary"},on:{click:e.addStatistical}},[e._v("\n      增加/减少授权\n    ")]):e._e()],1),n("addStatistical",{attrs:{consumerId:e.consumerId,contractId:e.softInfo.contract_id,visible:e.visibleStatical},on:{"update:visible":function(t){e.visibleStatical=t},enter:e.getData}}),n("div",[n("el-table",{attrs:{border:"",data:e.tableData}},[n("el-table-column",{attrs:{label:"产品名称",width:"300px",prop:"sdk_type_name"}}),n("el-table-column",{attrs:{label:"产品类型",prop:"contract_type"}}),n("el-table-column",{attrs:{label:"单次授权有效期（天）",prop:"authorized_days"}}),n("el-table-column",{attrs:{label:"已激活次数",prop:"activated_count"}}),n("el-table-column",{attrs:{label:"剩余激活次数",prop:"remaining_count"}})],1)],1),n("megTitle",{staticClass:"mt20 mb20"},[e._v("\n    授权变更详情\n  ")]),n("el-scrollbar",[n("el-table",{attrs:{border:"",data:e.changeTableData}},[n("el-table-column",{attrs:{label:"日期",formatter:e.formatterDateTime,prop:"changed_time"}}),n("el-table-column",{attrs:{label:"授权变更情况",prop:"changed_detail"}}),n("el-table-column",{attrs:{label:"变更原因",prop:"changed_reason"}})],1)],1)],1)},Je=[],Qe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"meg-return",on:{click:e.click}},[n("i",{staticClass:"iconfont icon-fanhui"}),n("span",[e._t("default")],2)])},Xe=[],Ze={name:"MegReturn",methods:{click:function(){this.$emit("click")}}},et=Ze,tt=Object(p["a"])(et,Qe,Xe,!1,null,null,null),nt=tt.exports,at=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:"增加/减少授权",visible:e.visible,width:"600px","before-close":e.handleClose},on:{"update:visible":function(t){e.visible=t}}},[n("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"变更次数",prop:"changeNum"}},[n("el-input",{attrs:{type:"number",placeholder:"正数增加/负数减少"},model:{value:e.ruleForm.changeNum,callback:function(t){e.$set(e.ruleForm,"changeNum",t)},expression:"ruleForm.changeNum"}})],1),n("el-form-item",{attrs:{label:"变更原因",prop:"changeReason"}},[n("el-input",{model:{value:e.ruleForm.changeReason,callback:function(t){e.$set(e.ruleForm,"changeReason",t)},expression:"ruleForm.changeReason"}})],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.handleClose}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.enter}},[e._v("确 定")])],1)],1)},st=[],it={name:"AddStatistical",props:{visible:{type:Boolean,default:function(){return!1}},consumerId:{default:0,type:Number},contractId:{default:-1,type:Number}},data:function(){return{ruleForm:{changeNum:null,changeReason:""},rules:{changeReason:[{required:!0,message:"请输入变更原因",trigger:"blur"}],changeNum:[{required:!0,message:"请输入变更次数",trigger:"blur"}]}}},computed:{adminId:function(){return this.$store.getters["user/getUserInfo"].id}},methods:{handleClose:function(){this.$emit("update:visible",!1)},enter:function(){var e=this;this.$refs.ruleForm.validate(function(t){t&&(e.$service.statistical.addStatistical({admin_id:e.adminId,consumer_id:e.consumerId,contract_id:e.contractId,change_num:Number(e.ruleForm.changeNum),change_reason:e.ruleForm.changeReason}).then(function(){e.$message.success("修改成功！"),e.$emit("enter")}),e.handleClose(t))})}}},ot=it,rt=Object(p["a"])(ot,at,st,!1,null,null,null),lt=rt.exports,ct={name:"AuthChange",components:{megReturn:nt,megTitle:S,addStatistical:lt},mixins:[I],props:{softInfo:{type:Object,default:function(){return[]}},consumerId:{type:Number,default:null},isAdmin:{type:Boolean,default:!1}},data:function(){return{changeTableData:[],visibleStatical:!1}},computed:{tableData:function(){return[this.softInfo]},userType:function(){return this.isAdmin?"admin":"user"}},mounted:function(){this.getData()},methods:{jump:function(){this.$emit("jump","statistic")},getData:function(){var e=this;this.$service.statistical["".concat(this.userType,"GetChangeHistory")]({consumer_id:this.consumerId,contract_id:this.softInfo.contract_id,admin_id:this.$store.getters["user/getUserInfo"].id}).then(function(t){e.changeTableData=t.data||[]})},addStatistical:function(){this.visibleStatical=!0}}},ut=ct,dt=Object(p["a"])(ut,We,Je,!1,null,null,null),mt=dt.exports,pt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-row",[n("megReturn",{staticClass:"mb20",on:{click:function(t){return e.jump("statistical")}}},[e._v("\n      返回统计表\n    ")]),n("el-table",{attrs:{border:"",data:e.tableData}},[n("el-table-column",{attrs:{label:"产品名称",width:"300px",prop:"sdk_type_name"}}),n("el-table-column",{attrs:{label:"产品类型",prop:"contract_type"}}),n("el-table-column",{attrs:{label:"单次授权有效期（天）",prop:"authorized_days"}}),n("el-table-column",{attrs:{label:"已激活次数",prop:"activated_count"}}),n("el-table-column",{attrs:{label:"剩余激活次数",prop:"remaining_count"}})],1)],1),n("el-row",{staticClass:"card"},[n("el-col",{attrs:{span:8,offset:2}},[n("el-card",{staticClass:"hg",attrs:{shadow:"hover","body-style":{padding:"0px"}}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[e._v("单一认证")])]),n("div",{staticClass:"content"},[n("span",[e._v("生成时间：")]),n("time",{staticClass:"time"},[e._v(e._s(e.formatterDateTime(e.softInfo.sa_created_date)))]),n("p",[e._v("MD5：")]),n("div",{staticClass:"btn clearfix"},[e.isAdmin?e._e():n("el-button",{staticClass:"button",attrs:{type:"primary"},on:{click:function(t){return e.download("Single")}}},[e._v("\n              下载\n            ")]),n("el-button",{staticClass:"button",attrs:{type:"danger"},on:{click:function(t){return e.reset("Single")}}},[e._v("\n              重置\n            ")])],1),n("el-alert",{staticClass:"mt20",attrs:{closable:!1,"show-icon":"",title:"单一认证：即完全信任通信认证文件，有这个文件就可以申请授权",type:"info"}})],1)])],1),n("el-col",{attrs:{span:8,offset:2}},[n("el-card",{staticClass:"hg",attrs:{shadow:"hover","body-style":{padding:"0px"}}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[e._v("双重认证")])]),n("div",{staticClass:"content"},[n("span",[e._v("生成时间：")]),n("time",{staticClass:"time"},[e._v(e._s(e.formatterDateTime(e.softInfo.da_created_date)))]),n("p",[e._v("MD5：")]),n("div",{staticClass:"mt20"}),n("div",{staticClass:"btn clearfix"},[e.isAdmin?e._e():n("el-button",{staticClass:"button",attrs:{type:"primary"},on:{click:function(t){return e.download("Double")}}},[e._v("\n              下载\n            ")]),n("el-button",{staticClass:"button",attrs:{type:"danger"},on:{click:function(t){return e.reset("Double")}}},[e._v("\n              重置\n            ")])],1),e.isAdmin?e._e():n("el-button",{staticClass:"button",attrs:{type:"primary"},on:{click:e.getActiveCode}},[e._v("\n            获取一次性激活码\n          ")]),e.singleCode?n("el-alert",{staticClass:"mt20",attrs:{closable:!1,"show-icon":"",title:e.singleCode,type:"success"}}):e._e(),n("el-alert",{staticClass:"mt20",attrs:{closable:!1,"show-icon":"",title:"双重认证：部分信任文件，需要文件 + 一次性激活码才可以申请授权",type:"info"}})],1)])],1)],1)],1)},ft=[],ht={name:"Certificate",components:{megReturn:nt},mixins:[I],props:{softInfo:{type:Object,default:function(){return[]}},isAdmin:{type:Boolean,default:!1},consumerId:{type:Number,default:null}},data:function(){return{singleCode:"",currentDate:new Date,service:this.$service.statistical}},computed:{tableData:function(){return[this.softInfo]},userType:function(){return this.isAdmin?"admin":"user"},param:function(){return{contract_id:this.softInfo.contract_id,admin_id:this.$store.getters["user/getUserInfo"].id,consumer_id:this.consumerId}}},methods:{jump:function(){this.$emit("jump","statistic")},download:function(e){this.service["".concat(this.userType).concat(e,"Authentication")](this.param)},getActiveCode:function(){var e=this;this.service["".concat(this.userType,"DoubleAuthenticationActiveCode")](this.param).then(function(t){e.singleCode=t.data.msg})},reset:function(e){var t=this;this.$confirm("重置通信认证文件,会导致之前的认证文件失效，即无法再使用旧的通信认证文件来激活新设备；已激活的设备不收影响， 是否确认要重置通信认证文件?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.service["".concat(t.userType).concat(e,"AuthenticationPut")](t.param).then(function(){t.$message.success("重置成功！")})})}}},gt=ht,bt=(n("e703"),Object(p["a"])(gt,pt,ft,!1,null,"00c9806e",null)),vt=bt.exports,_t=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("megReturn",{staticClass:"mb20",on:{click:function(t){return e.jump("statistical")}}},[e._v("\n    返回统计表\n  ")]),n("el-table",{attrs:{border:"",data:e.tableData}},[n("el-table-column",{attrs:{label:"产品名称",width:"300px",prop:"sdk_type_name"}}),n("el-table-column",{attrs:{label:"产品类型",prop:"contract_type"}}),n("el-table-column",{attrs:{label:"单次授权有效期（天）",prop:"authorized_days"}}),n("el-table-column",{attrs:{label:"已激活次数",prop:"activated_count"}}),n("el-table-column",{attrs:{label:"剩余激活次数",prop:"remaining_count"}})],1),n("div",{staticClass:"char"},[n("div",{staticClass:"char-top mt20 mb20"},[n("div",{staticClass:"left"},[n("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},on:{change:e.getData},model:{value:e.dates,callback:function(t){e.dates=t},expression:"dates"}}),n("el-radio-group",{staticClass:"mr20 ml20",on:{change:e.getData},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[n("el-radio",{attrs:{label:"days"}},[e._v("\n            日\n          ")]),n("el-radio",{attrs:{label:"weeks"}},[e._v("\n            周\n          ")]),n("el-radio",{attrs:{label:"months"}},[e._v("\n            月\n          ")])],1)],1),n("div",{staticClass:"right"},[n("el-button",{staticClass:"mr20",attrs:{size:"medium",type:"primary"},on:{click:e.exportData}},[e._v("\n          导出\n        ")]),n("el-tooltip",{attrs:{effect:"light",content:"请联系商服，申请激活次数对账详单",placement:"top-start"}},[n("span",{staticClass:"c-info"},[e._v("对于数量有疑问？")])])],1)]),n("veHistogram",{attrs:{settings:e.chartSettings,data:e.chartData}})],1)],1)},yt=[],wt=n("77df"),kt=n.n(wt),St={data:function(){return{pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-6048e5),e.$emit("pick",[n,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-2592e6),e.$emit("pick",[n,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-7776e6),e.$emit("pick",[n,t])}}]}}}},Ct={name:"Consumption",components:{veHistogram:kt.a,megReturn:nt},mixins:[St,I],props:{softInfo:{type:Object,default:function(){return[]}},consumerId:{type:Number,default:null},isAdmin:{type:Boolean,default:!1}},data:function(){return{dates:[],type:"days",chartSettings:{labelMap:{authorization_application_count:"授权请求次数",authorization_application_failed_count:"授权成功次数",authorization_application_successful_count:"授权失败次数",authorization_deduction_count:"授权扣减次数"}},chartData:{columns:["group_by","authorization_application_count","authorization_application_failed_count","authorization_application_successful_count","authorization_deduction_count"],rows:[]}}},computed:{tableData:function(){return[this.softInfo]},userType:function(){return this.isAdmin?"admin":"user"},param:function(){return{consumer_id:this.consumerId,contract_id:this.softInfo.contract_id,group_by:this.type,start_time:this.dateToStr(this.dates[0]),end_time:this.dateToStr(this.dates[1]),admin_id:this.$store.getters["user/getUserInfo"].id}}},mounted:function(){var e=new Date,t=new Date;t.setTime(t.getTime()-7776e6),this.dates=[t,e],this.getData()},methods:{jump:function(){this.$emit("jump","statistic")},getData:function(){var e=this;this.$service.statistical["".concat(this.userType,"GetConsumption")](this.param).then(function(t){e.chartData.rows=t.data})},exportData:function(){this.$service.statistical["".concat(this.userType,"ConsumeStatisticsExport")](this.param)}}},xt=Ct,It=(n("ebb1"),Object(p["a"])(xt,_t,yt,!1,null,"c05c0ee6",null)),$t=It.exports,Tt={name:"Statistic",components:{megTitle:S,statistic:Ge,authChange:mt,certificate:vt,consumption:$t},props:{showTitle:{type:Boolean,default:!0},isAdmin:{type:Boolean,default:!1}},data:function(){return{thisPage:"statistic",checkRow:{},tableData:[]}},computed:{consumerId:function(){return this.$store.getters["user/getUserInfo"].id}},methods:{handleClick:function(){console.log(123)},jump:function(e,t){t&&(this.checkRow=t),this.thisPage=e},getData:function(){this.$refs.thisRef.getData()}}},Dt=Tt,Nt=Object(p["a"])(Dt,je,Re,!1,null,"661e4c24",null),Ft=Nt.exports,Pt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"meg-log"},[n("megTitle",[e._v("日志审计")]),n("div",{staticClass:"top"},[n("div",{staticClass:"fx1"}),n("div",{staticClass:"tc"},[e._v("\n      操作类型过滤:\n    ")]),n("el-select",{attrs:{placeholder:"请选择"},on:{change:e.query},model:{value:e.actionType,callback:function(t){e.actionType=t},expression:"actionType"}},e._l(e.options,function(e){return n("el-option",{key:e.event_type_id,attrs:{label:e.event_type_name,value:e.event_type_id}})}),1),n("div",{staticClass:"mr20"}),n("el-input",{staticClass:"input-text",attrs:{placeholder:"请输入管理员名称/操作对象"},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}},[n("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1)],1),n("div",{staticClass:"mt20"}),n("div",{staticClass:"buttom"},[n("logTable",{attrs:{tableData:e.tableData}})],1)],1)},Mt=[],Ot=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-scrollbar",[n("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:e.tableData}},[n("el-table-column",{attrs:{prop:"master_name",label:"管理员名称",width:"180"}}),n("el-table-column",{attrs:{prop:"created_at",label:"操作时间",formatter:e.formatterDateTime,width:"180"}}),n("el-table-column",{attrs:{prop:"edit_type",width:"180",label:"操作类型"}}),n("el-table-column",{attrs:{width:"100",prop:"slave_id",label:"操作对象"}}),n("el-table-column",{attrs:{prop:"edit_details",label:"操作详情"}})],1)],1)},Ut=[],Vt={name:"LogTable",mixins:[I],props:{tableData:{type:Array,default:function(){return[]}}}},At=Vt,Et=Object(p["a"])(At,Ot,Ut,!1,null,null,null),Lt=Et.exports,jt={name:"Log",components:{megTitle:S,logTable:Lt},data:function(){return{text:"",actionType:0,tableData:[],options:[]}},computed:{param:function(){return{name:this.text,type:this.actionType,amdin_id:this.adminId}},adminId:function(){return this.$store.getters["user/getAdminId"]}},watch:{text:function(){this.query()}},mounted:function(){this.getEventTypes(),this.query()},methods:{query:function(){var e=this;this.$service.log.getList(this.param).then(function(t){e.tableData=t.data})},getEventTypes:function(){var e=this;this.$service.log.getEventTypes(this.param).then(function(t){e.options=t.data})}}},Rt=jt,zt=Object(p["a"])(Rt,Pt,Mt,!1,null,null,null),Bt=zt.exports,qt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"meg-user-manage"},[n("megTitle",{directives:[{name:"show",rawName:"v-show",value:!e.dataile,expression:"!dataile"}]},[e._v("\n    客户管理\n  ")]),n("searchUser",{directives:[{name:"show",rawName:"v-show",value:!e.dataile,expression:"!dataile"}],on:{detaile:e.detaile}}),n("userDetaile",{directives:[{name:"show",rawName:"v-show",value:e.dataile,expression:"dataile"}],attrs:{userInfo:e.userInfo},on:{returnPage:e.returnPage}})],1)},Ht=[],Kt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"meg-search-user"},[n("div",{staticClass:"db"},[e.showPushType?n("el-radio-group",{attrs:{size:"medium"},model:{value:e.pushType,callback:function(t){e.pushType=t},expression:"pushType"}},[n("el-radio-button",{attrs:{label:"1"}},[e._v("\n        未推送客户("+e._s(e.unPushedTableData.length)+")\n      ")]),n("el-radio-button",{attrs:{label:"2"}},[e._v("\n        已推送客户("+e._s(e.pushedTableData.length)+")\n      ")])],1):e._e(),n("div",{staticClass:"fx1"}),n("el-input",{staticClass:"search mb20",attrs:{placeholder:"姓名/公司/邮箱号",size:"medium"},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}},[n("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1)],1),n("el-scrollbar",{class:{h300:!e.userManage}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{border:"",data:e.showTableData},on:{"selection-change":e.handleSelectionChange}},[e.userManage||e.pushed?e._e():n("el-table-column",{attrs:{type:"selection",width:"55"}}),n("el-table-column",{attrs:{prop:"id",label:"用户id",width:"180"}}),n("el-table-column",{attrs:{prop:"name",label:"名称",width:"180"}}),n("el-table-column",{attrs:{prop:"phone_number",label:"绑定手机"}}),n("el-table-column",{attrs:{prop:"email",label:"邮箱"}}),n("el-table-column",{attrs:{prop:"company_name",label:"公司名称"}}),e.userManage?n("el-table-column",{attrs:{prop:"name",label:"点击查看详情"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticClass:"c-light pointer",attrs:{type:"text"},on:{click:function(n){return e.detaile(t.row)}}},[e._v("\n            详情\n          ")])]}}],null,!1,4228580627)}):e._e()],1)],1)],1)},Yt=[],Gt={name:"SearchUser",props:{userManage:{type:Boolean,default:!0},splitByPushedSdkId:{type:Number,default:-1},showPushType:{type:Boolean,default:!1}},data:function(){return{pushType:"1",loading:!1,text:"",multipleSelection:[],tableData:[],pushedTableData:[],unPushedTableData:[]}},computed:{adminId:function(){return this.$store.getters["user/getAdminId"]},pushed:function(){return"1"!==this.pushType},showTableData:function(){var e=[];return e=this.showPushType?this.pushed?this.pushedTableData:this.unPushedTableData:this.tableData,e}},watch:{text:function(){this.getData()},pushed:function(){this.getData()}},mounted:function(){this.getData()},methods:{handleSelectionChange:function(e){this.multipleSelection=e,this.$emit("handleSelectionChange",e)},detaile:function(e){this.$emit("detaile",e)},filter:function(e){var t=[];return this.showPushType?(this.pushedTableData=e.filter(function(e){return!0===e.pushed}),this.unPushedTableData=e.filter(function(e){return!1===e.pushed})):t=e,t},getData:function(){var e=this;this.loading=!0,this.$service.userManage.getUserList({admin_id:this.adminId,search_by:this.text,splitByPushedSdkId:this.splitByPushedSdkId}).then(function(t){e.loading=!1,e.tableData=t.data||[],e.filter(e.tableData)})}}},Wt=Gt,Jt=Object(p["a"])(Wt,Kt,Yt,!1,null,null,null),Qt=Jt.exports,Xt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"user-detaile"},[n("megReturn",{staticClass:"mb20",on:{click:e.returnPage}},[e._v("\n    返回客户管理\n  ")]),n("div",[n("el-table",{staticClass:" mb20",attrs:{border:"",data:e.tableData}},[n("el-table-column",{attrs:{prop:"id",label:"用户id",width:"180"}}),n("el-table-column",{attrs:{prop:"name",label:"名称",width:"180"}}),n("el-table-column",{attrs:{prop:"phone_number",label:"绑定手机"}}),n("el-table-column",{attrs:{prop:"email",label:"邮箱"}}),n("el-table-column",{attrs:{prop:"company_name",label:"公司名称"}})],1)],1),n("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"软件管理",name:"1"}},[n("downSoft",{ref:"downSoft",attrs:{softType:"userManage",adminId:e.adminId,consumerId:e.userInfo.id}},[n("el-button",{staticClass:"fr",attrs:{size:"medium",type:"primary"},on:{click:e.chooseSoft}},[e._v("\n          新增版本\n        ")])],1)],1),n("el-tab-pane",{attrs:{label:"授权统计",name:"2"}},[n("div",{staticClass:"db mb20"},[n("div",{staticClass:"fx1"}),n("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.addContracts}},[e._v("\n          新增产品授权类型\n        ")])],1),n("statistic",{ref:"statistic",attrs:{isAdmin:!0,showTitle:!1}})],1),n("el-tab-pane",{attrs:{label:"用户日志",name:"3"}},[n("logTable",{attrs:{tableData:e.logTableData}})],1),n("el-tab-pane",{attrs:{label:"账户信息修改",name:"4"}},[n("div",{staticClass:"db mt20"},[n("div",{staticClass:"fx1"}),n("editUser",{attrs:{form:e.userInfo}}),n("div",{staticClass:"fx1"})],1)])],1),e.visible?n("downSoftDialog",{attrs:{softType:"userManage",adminId:e.adminId,consumerId:e.userInfo.id,visible:e.visible},on:{"update:visible":function(t){e.visible=t},enter:e.enter}}):e._e(),e.visibleCon?n("addContractsDialog",{attrs:{adminId:e.adminId,consumerId:e.userInfo.id,visible:e.visibleCon},on:{"update:visible":function(t){e.visibleCon=t},enter:e.refresh}}):e._e()],1)},Zt=[],en=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"名称"}},[n("el-input",{model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1),n("el-form-item",{attrs:{label:"密码"}},[n("span",[e._v("原始密码不可见/重置之后发送邮件生成随机密码串")]),n("el-button",{staticClass:"ml20",attrs:{size:"medium"},on:{click:e.resetPassword}},[e._v("\n      重置密码\n    ")])],1),n("el-form-item",{attrs:{label:"绑定邮箱"}},[n("el-input",{model:{value:e.editForm.email,callback:function(t){e.$set(e.editForm,"email",t)},expression:"editForm.email"}})],1),n("el-form-item",{attrs:{label:"绑定手机"}},[n("el-input",{model:{value:e.editForm.phone_number,callback:function(t){e.$set(e.editForm,"phone_number",t)},expression:"editForm.phone_number"}})],1),n("el-form-item",{attrs:{label:"公司名称"}},[n("el-input",{model:{value:e.editForm.company_name,callback:function(t){e.$set(e.editForm,"company_name",t)},expression:"editForm.company_name"}})],1),n("el-form-item",{attrs:{label:""}},[n("el-button",{attrs:{size:"medium",type:"primary"},on:{click:e.enterChange}},[e._v("\n      确认变更\n    ")]),n("el-button",{attrs:{size:"medium",type:"warning"},on:{click:e.reset}},[e._v("\n      放弃修改\n    ")])],1)],1)},tn=[],nn={name:"EditUser",props:{form:{type:Object,default:function(){return{}}}},data:function(){return{editForm:{name:"",email:"",phone_number:"",company_name:""}}},computed:{adminId:function(){return this.$store.getters["user/getAdminId"]}},watch:{form:function(){this.reset()}},methods:{reset:function(){this.editForm=Object.assign(this.editForm,this.form)},resetPassword:function(){var e=this;this.$service.userManage.resetPassword({admin_id:this.adminId,consumer_id:this.form.id}).then(function(){e.$message.success("密码重置成功！")})},enterChange:function(){var e=this;this.$service.userManage.editUser(Object(Q["a"])({admin_id:this.adminId,consumer_id:this.form.id},this.editForm)).then(function(){Object.assign(e.form,e.editForm),e.$message.success("用户信息修改成功！")})}}},an=nn,sn=Object(p["a"])(an,en,tn,!1,null,null,null),on=sn.exports,rn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{staticClass:"meg-down-soft-dialog",attrs:{title:"选择添加版本",visible:e.visible,width:"1000px","before-close":e.handleClose},on:{"update:visible":function(t){e.visible=t}}},[n("downSoft",{attrs:{softType:"userManage",push:"unpushed",adminId:e.adminId,consumerId:e.consumerId,check:!0},on:{handleSelectionChange:e.handleSelectionChange}},[n("el-alert",{staticClass:"mb20",staticStyle:{width:"400px"},attrs:{title:"已存在于客户列表中的版本将不显示",type:"warning",closable:!1}})],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.handleClose}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.enter}},[e._v("确 定")])],1)],1)},ln=[],cn={name:"DownSoftDialog",components:{downSoft:Ue},props:{adminId:{type:Number,default:null},consumerId:{type:Number,default:null},visible:{type:Boolean,default:function(){return!1}}},data:function(){return{select:[]}},methods:{handleClose:function(){this.$emit("update:visible",!1)},handleSelectionChange:function(e){this.select=e},enter:function(){0===this.select.length?this.$message({message:"请选择",type:"warning"}):(this.handleClose(),this.$emit("enter",this.select),console.log(this.select))}}},un=cn,dn=Object(p["a"])(un,rn,ln,!1,null,null,null),mn=dn.exports,pn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:"新增产品授权类型",visible:e.visible,width:"500px","before-close":e.handleClose},on:{"update:visible":function(t){e.visible=t}}},[n("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"选择产品",prop:"sdkTypeName"}},[n("el-popover",{attrs:{placement:"right",width:"400",trigger:"click"},model:{value:e.popoverVisible,callback:function(t){e.popoverVisible=t},expression:"popoverVisible"}},[n("software",{ref:"software",attrs:{list:e.softList,showNameSpace:!0},on:{initSuccess:e.initNameSpaceSuccess,changeNameSpace:e.changeNameSpace,clickItem:e.clickSoft}}),n("el-input",{attrs:{slot:"reference",disabled:"",placeholder:"请点击选择产品"},slot:"reference",model:{value:e.ruleForm.sdkTypeName,callback:function(t){e.$set(e.ruleForm,"sdkTypeName",t)},expression:"ruleForm.sdkTypeName"}})],1)],1),n("el-form-item",{attrs:{label:"产品类型",prop:"contractType"}},[n("el-radio-group",{model:{value:e.ruleForm.contractType,callback:function(t){e.$set(e.ruleForm,"contractType",t)},expression:"ruleForm.contractType"}},e._l(e.$t("select.contractType"),function(t){return n("el-radio",{key:t.value,attrs:{label:t.value}},[e._v("\n          "+e._s(t.label)+"\n        ")])}),1)],1),n("el-form-item",{attrs:{label:"有效期(天)",prop:"authorizedDays"}},[n("el-input-number",{attrs:{min:1,label:"请输入"},model:{value:e.ruleForm.authorizedDays,callback:function(t){e.$set(e.ruleForm,"authorizedDays",t)},expression:"ruleForm.authorizedDays"}})],1),n("el-form-item",{attrs:{label:"授权个数",prop:"purchasedCount"}},[n("el-input-number",{attrs:{placeholder:"请输入",min:1,label:"请输入"},model:{value:e.ruleForm.purchasedCount,callback:function(t){e.$set(e.ruleForm,"purchasedCount",t)},expression:"ruleForm.purchasedCount"}})],1),n("el-form-item",{attrs:{label:"备注",prop:"changeReason"}},[n("el-input",{attrs:{type:"textarea"},model:{value:e.ruleForm.node,callback:function(t){e.$set(e.ruleForm,"node",t)},expression:"ruleForm.node"}})],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.handleClose}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.enter}},[e._v("确 定")])],1)],1)},fn=[],hn={name:"AddContractsDialog",components:{software:xe},props:{visible:{type:Boolean,default:function(){return!1}},consumerId:{default:0,type:Number}},data:function(){return{popoverVisible:!1,contractType:1,softList:[],checkedSoft:{sdk_type_name:""},nameSpaceId:-1,ruleForm:{sdkTypeName:"",contractType:0,authorizedDays:90,purchasedCount:10,node:""},rules:{sdkTypeName:[{required:!0,message:"请选择产品",trigger:"blur"}]}}},computed:{adminId:function(){return this.$store.getters["user/getUserInfo"].id},sdkTypeId:function(){return this.checkedSoft.sdk_type_id}},watch:{"ruleForm.contractType":function(e){this.ruleForm.authorizedDays=1===e?36500:90},checkedSoft:function(e){this.ruleForm.sdkTypeName=e.sdk_type_name}},mounted:function(){this.getData()},methods:{clickSoft:function(e){this.checkedSoft=e,this.popoverVisible=!1},initNameSpaceSuccess:function(e){this.nameSpaceId=e[0].id,this.getData()},addId:function(e){return e.forEach(function(e){e.id=e.sdk_id||e.sdk_type_id}),e},changeNameSpace:function(e){this.nameSpaceId=e,this.getData()},getData:function(){var e=this;this.$service.softManage.getSdktTypesHis({admin_id:this.adminId,namespaces_id:this.nameSpaceId}).then(function(t){e.softList=e.addId(t.data||[])})},handleClose:function(){this.$emit("update:visible",!1)},enter:function(){var e=this;console.log(this.ruleForm);var t=this;this.$refs.ruleForm.validate(function(n){n&&e.$service.statistical.addContracts({admin_id:e.adminId,consumer_id:e.consumerId,sdk_type_id:e.sdkTypeId,contract_type:e.ruleForm.contractType,authorized_days:e.ruleForm.authorizedDays,purchased_count:e.ruleForm.purchasedCount,node:e.ruleForm.node}).then(function(){e.$message.success("新增成功！"),t.$emit("enter"),e.handleClose()})})}}},gn=hn,bn=Object(p["a"])(gn,pn,fn,!1,null,null,null),vn=bn.exports,_n={name:"UserDetaile",components:{megReturn:nt,editUser:on,logTable:Lt,downSoft:Ue,downSoftDialog:mn,statistic:Ft,addContractsDialog:vn},props:{userInfo:{type:Object,default:function(){return null}}},data:function(){return{visible:!1,visibleStatical:!1,visibleCon:!1,activeName:"1",logTableData:[]}},computed:{tableData:function(){return this.userInfo?[this.userInfo]:[]},adminId:function(){return this.$store.getters["user/getAdminId"]}},watch:{userInfo:function(){this.getUserListLog()}},mounted:function(){this.getUserListLog()},methods:{addContracts:function(){this.visibleCon=!0},returnPage:function(){this.$emit("returnPage")},chooseSoft:function(){this.visible=!0},getUserListLog:function(){var e=this;this.$service.log.getUserList({amdin_id:this.adminId,consumer_id:this.userInfo.id}).then(function(t){e.logTableData=t.data})},enter:function(e){var t=this,n=e.map(function(e){return e.sdk_id});this.$service.userManage.pushSdk({admin_id:this.adminId,consumer_id:this.userInfo.id,sdk_ids:n}).then(function(){t.$refs.downSoft.getData(),t.$message.success("添加成功！")})},refresh:function(){this.$refs.statistic.getData()}}},yn=_n,wn=Object(p["a"])(yn,Xt,Zt,!1,null,null,null),kn=wn.exports,Sn={name:"UserManage",components:{megTitle:S,searchUser:Qt,userDetaile:kn},data:function(){return{dataile:!1,userInfo:{}}},methods:{detaile:function(e){this.dataile=!0,this.userInfo=e},returnPage:function(){this.dataile=!1}}},Cn=Sn,xn=Object(p["a"])(Cn,qt,Ht,!1,null,null,null),In=xn.exports,$n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"meg-soft-manage"},[n("megTitle",{staticClass:"mb20"},[e._v("\n    软件管理\n  ")]),n("downSoft",{attrs:{softType:"softManage",pushToUser:!0,showNameSpace:!0,adminId:e.adminId},on:{pushToUserFun:e.pushToUserFun}}),e.visible?n("searchUserDia",{attrs:{splitByPushedSdkId:e.selectSdk.sdk_id,visible:e.visible},on:{enter:e.enter,"update:visible":function(t){e.visible=t}}}):e._e()],1)},Tn=[],Dn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:"选择用户",visible:e.visible,width:"900px","before-close":e.handleClose},on:{"update:visible":function(t){e.visible=t}}},[n("searchUser",{attrs:{showPushType:!0,splitByPushedSdkId:e.splitByPushedSdkId,userManage:!1},on:{handleSelectionChange:e.handleSelectionChange}}),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.handleClose}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.enter}},[e._v("确 定")])],1)],1)},Nn=[],Fn={name:"SearchUserDia",components:{searchUser:Qt},props:{visible:{type:Boolean,default:function(){return!1}},splitByPushedSdkId:{type:Number,default:-1}},data:function(){return{select:[]}},computed:{adminId:function(){return this.$store.getters["user/getAdminId"]}},methods:{handleSelectionChange:function(e){this.select=e},handleClose:function(){this.$emit("update:visible",!1)},enter:function(){0===this.select.length?this.$message({message:"请选择",type:"warning"}):(this.handleClose(),this.$emit("enter",this.select))}}},Pn=Fn,Mn=Object(p["a"])(Pn,Dn,Nn,!1,null,null,null),On=Mn.exports,Un={name:"SoftManage",components:{megTitle:S,downSoft:Ue,searchUserDia:On},data:function(){return{visible:!1,selectSdk:{}}},computed:{adminId:function(){return this.$store.getters["user/getAdminId"]}},methods:{pushToUserFun:function(e){this.selectSdk=e,this.visible=!0},enter:function(e){var t=this,n=e.map(function(e){return e.id});this.$service.softManage.pushToConsumers({consumer_ids:n,sdk_id:this.selectSdk.sdk_id,admin_id:this.adminId}).then(function(){t.$message.success("推送成功！")})}}},Vn=Un,An=Object(p["a"])(Vn,$n,Tn,!1,null,null,null),En=An.exports,Ln=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"namespace-manage"},[n("megTitle",[e._v("分区管理")]),n("el-button",{staticClass:"add-btn",attrs:{type:"primary"},on:{click:e.openDialog}},[e._v("\n    新增分区/namespace\n  ")]),n("el-button",{staticClass:"add-btn",attrs:{type:"primary"},on:{click:e.openOwnerDialog}},[e._v("\n    新增namespaceOwner\n  ")]),n("el-dialog",{staticClass:"dialogClass",attrs:{title:"新增分区Owner",visible:e.ownerDialogVisible,width:"30%"},on:{"update:visible":function(t){e.ownerDialogVisible=t}}},[n("el-form",{attrs:{model:e.ownerForm,rules:e.addOwnerRules}},[n("el-form-item",{attrs:{label:"Owner","label-width":"100px",prop:"owner_id"}},[n("el-input",{model:{value:e.ownerForm.owner_id,callback:function(t){e.$set(e.ownerForm,"owner_id",t)},expression:"ownerForm.owner_id"}})],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.ownerDialogVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.addNamespaceOwner}},[e._v("确 定")])],1)],1),n("el-dialog",{staticClass:"dialogClass",attrs:{title:"新增分区",visible:e.newDialogVisible,width:"30%"},on:{"update:visible":function(t){e.newDialogVisible=t}}},[n("el-form",{attrs:{model:e.form,rules:e.addRules}},[n("el-form-item",{attrs:{label:"分区名称","label-width":"100px",prop:"name"}},[n("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.newDialogVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.addNamespace}},[e._v("确 定")])],1)],1),n("el-dialog",{staticClass:"dialogClass",attrs:{title:"修改分区",visible:e.editDialogVisible,width:"40%"},on:{"update:visible":function(t){e.editDialogVisible=t}}},[n("el-form",{attrs:{model:e.form,"label-position":"left"}},[n("el-form-item",{attrs:{label:"分区名称","label-width":"100px"}},[n("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),n("el-form-item",{attrs:{label:"Owner权限","label-width":"100px"}},[n("el-input",{model:{value:e.form.owners,callback:function(t){e.$set(e.form,"owners",t)},expression:"form.owners"}})],1),n("el-form-item",{attrs:{label:"写权限","label-width":"100px"}},[n("el-input",{model:{value:e.form.writers,callback:function(t){e.$set(e.form,"writers",t)},expression:"form.writers"}})],1),n("el-form-item",{attrs:{label:"技术支持权限","label-width":"100px"}},[n("el-input",{model:{value:e.form.supporters,callback:function(t){e.$set(e.form,"supporters",t)},expression:"form.supporters"}})],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.editNamespace}},[e._v("确 定")])],1)],1),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[n("el-table-column",{attrs:{prop:"name",label:"分区名称"}}),n("el-table-column",{attrs:{prop:"owners",label:"管理权限",formatter:e.format}}),n("el-table-column",{attrs:{prop:"writers",label:"写权限",formatter:e.format}}),n("el-table-column",{attrs:{prop:"supporters",label:"技术支持权限",formatter:e.format}}),n("el-table-column",{attrs:{prop:"address",label:"分区管理"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text"},on:{click:function(n){return e.changeNamespace(t.$index,t.row)}}},[e._v("\n          修改\n        ")]),n("el-button",{attrs:{type:"text"},on:{click:function(n){return e.deleteNamespace(t.$index,t.row,e.tableData)}}},[e._v("\n          删除\n        ")])]}}])})],1)],1)},jn=[],Rn=(n("0857"),{name:"NamespaceManage",components:{megTitle:S},directives:{focus:{inserted:function(e){e.querySelector("input").focus()}}},data:function(){return{index:"",admin_id:1,namespace_id:"",ownerDialogVisible:!1,newDialogVisible:!1,editDialogVisible:!1,tableData:[],ownerForm:{name:""},form:{name:"",owners:"",writers:"",supporters:""},addRules:{name:[{required:!0,message:"请输入分区名称",trigger:"blur"}]},addOwnerRules:{owner_id:[{required:!0,message:"请输入分区Owner",trigger:"blur"}]}}},mounted:function(){this.getNamespaceList()},methods:{getNamespaceList:function(){var e=this;this.$service.namespaceManage.getList({admin_id:this.$store.getters["user/getAdminId"]}).then(function(t){console.log(t),e.tableData=t.data}).catch(function(e){console.log(e)})},openDialog:function(){this.form={},this.newDialogVisible=!0},openOwnerDialog:function(){this.ownerForm={},this.ownerDialogVisible=!0},addNamespaceOwner:function(){var e=this;this.$service.namespaceManage.addOwener({admin_id:this.$store.getters["user/getAdminId"],namespace_id:this.namespace_id,owner_id:this.ownerForm.owner_id}).then(function(t){console.log(t),200===t.status&&(e.ownerDialogVisible=!1,console.log("新增分区管理员成功"))}).catch(function(e){console.log(e),console.log("新增分区失败")})},addNamespace:function(){var e=this;this.$service.namespaceManage.creat({admin_id:this.$store.getters["user/getAdminId"],name:this.form.name}).then(function(t){if(console.log(t),200===t.status){e.newDialogVisible=!1,console.log("新增分区成功");var n={name:e.form.name};e.tableData.push(n)}}).catch(function(e){console.log(e),console.log("新增分区失败")})},editNamespace:function(){var e=this,t=this.form.owners.toString().split(","),n=this.form.writers.toString().split(","),a=this.form.supporters.toString().split(",");this.$service.namespaceManage.update({admin_id:this.$store.getters["user/getAdminId"],namespace_id:this.namespace_id,name:this.form.name,owners:t,writers:n,supporters:a}).then(function(t){console.log(t),200===t.status&&(e.editDialogVisible=!1,console.log("修改分区成功"),e.tableData[e.index].name=e.form.name,e.tableData[e.index].owners=e.form.owners,e.tableData[e.index].writers=e.form.writers,e.tableData[e.index].supporters=e.form.supporters)}).catch(function(e){console.log(e),console.log("修改分区失败")})},changeNamespace:function(e,t){console.log(t),console.log("index:"+e),this.index=e,this.editDialogVisible=!0,this.namespace_id=t.id,console.log(this.namespace_id),this.form.name=t.name,this.form.owners=t.owners,this.form.writers=t.writers,this.form.supporters=t.supporters},deleteNamespace:function(e,t,n){var a=this;console.log(t.id),this.$confirm("此操作将删除该分区, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$service.namespaceManage.delete({admin_id:a.$store.getters["user/getAdminId"],namespace_id:t.id}).then(function(t){console.log(t),200===t.status&&(n.splice(e,1),console.log("删除分区成功"))}).catch(function(e){console.log(e),console.log("删除分区失败")})}).catch(function(){})},format:function(e,t,n){return n instanceof Array?String(n):n}}}),zn=Rn,Bn=Object(p["a"])(zn,Ln,jn,!1,null,null,null),qn=Bn.exports,Hn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"release-manage"},[n("megTitle",{staticClass:"mb20"},[e._v("\n    发布管理\n  ")]),n("div",{staticClass:"button"},[n("div",{staticClass:"left"},[n("el-card",{staticClass:"meg-software",attrs:{shadow:"never"}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[e._v("产品列表")])]),n("div",{staticClass:"inputClass"},[n("el-button",{staticClass:"add-sdk-production",attrs:{type:"primary"},on:{click:function(t){e.newSdkVisible=!0,e.isUpdate=!1,e.form={}}}},[e._v("\n            新增SDK产品\n          ")])],1),n("el-dialog",{staticClass:"dialogClass",attrs:{title:e.isUpdate?"修改SDK":"新增SDK",visible:e.newSdkVisible,width:"30%"},on:{"update:visible":function(t){e.newSdkVisible=t}}},[n("el-form",{attrs:{model:e.form,rules:e.addRules}},[n("el-form-item",{attrs:{label:"SDK名称","label-width":"100px",prop:"name"}},[n("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.newSdkVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.choose}},[e._v("确 定")])],1)],1),n("el-dialog",{staticClass:"dialogClass",attrs:{title:e.isUpdateVersion?"修改SDK版本":"新增SDK版本",visible:e.updaVersionVisible,width:"40%"},on:{"update:visible":function(t){e.updaVersionVisible=t}}},[n("el-form",{attrs:{model:e.tableForm,"label-position":"left",rules:e.addSdkRules}},[n("el-form-item",{attrs:{label:"版本号","label-width":"100px",prop:"version"}},[n("el-input",{model:{value:e.tableForm.version,callback:function(t){e.$set(e.tableForm,"version",t)},expression:"tableForm.version"}})],1),n("el-form-item",{attrs:{label:"版本类型","label-width":"100px",prop:"type"}},[n("el-input",{model:{value:e.tableForm.type,callback:function(t){e.$set(e.tableForm,"type",t)},expression:"tableForm.type"}})],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.updaVersionVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.chooseVersion}},[e._v("确 定")])],1)],1),e.showNameSpace?n("el-input",{staticClass:"mb20",attrs:{placeholder:"请输入产品名称",size:"medium"},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}},[n("el-select",{attrs:{slot:"prepend",placeholder:"请选择分区"},on:{change:e.changeNameSpace},slot:"prepend",model:{value:e.nameSpaceValue,callback:function(t){e.nameSpaceValue=t},expression:"nameSpaceValue"}},e._l(e.nameSpaces,function(e){return n("el-option",{key:e.name,attrs:{label:e.name,value:e.id}})}),1)],1):e._e(),n("el-scrollbar",e._l(e.showList,function(t){return n("div",{key:t.sdk_type_id,staticClass:"item",class:{on:t.sdk_type_id===e.ckeckedId},on:{click:function(n){return e.open(t.sdk_type_id,t.sdk_type_name)}}},[n("span",[e._v(e._s(t.sdk_type_name))]),n("el-button",{staticStyle:{float:"right","padding-right":"20px"},attrs:{type:"text"},on:{click:function(n){return e.changeSDK(t.sdk_type_id,e.index)}}},[e._v("\n              修改\n            ")])],1)}),0)],1)],1),n("div",{staticClass:"mr20"}),n("div",{staticClass:"right"},[n("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[e._v("版本"+e._s(e.versionName))])]),n("div",{staticClass:"inputClass"},[n("el-button",{staticClass:"add-sdk-production",attrs:{type:"primary"},on:{click:function(t){e.updaVersionVisible=!0,e.isUpdateVersion=!1,e.tableForm={}}}},[e._v("\n            新增SDK版本\n          ")])],1),[n("el-scrollbar",[n("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:e.versionList},on:{"selection-change":e.handleSelectionChange}},[e.check?n("el-table-column",{attrs:{type:"selection",width:"55"}}):e._e(),n("el-table-column",{attrs:{prop:"sdk_version",label:"版本号"}}),n("el-table-column",{attrs:{prop:"release_version_type",label:"版本类型"}}),n("el-table-column",{attrs:{prop:"updated_time",formatter:e.formatterDateTime,label:"更新时间"}}),n("el-table-column",{attrs:{prop:"sdk_download_url",label:"下载地址"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{on:{click:function(n){return e.upload(t.row)}}},[n("el-upload",{staticClass:"c-light pointer upload-class",attrs:{action:e.uploadUrl,"http-request":e.myUpload,"show-file-list":!1}},[n("span",{staticClass:"el-upload__text "},[n("em",[e._v("点击上传")])])])],1),n("span",{staticClass:"c-light pointer",attrs:{type:"text"},on:{click:function(n){return e.download(t.row.sdk_id)}}},[e._v("\n                    点击下载\n                  ")])]}}])}),n("el-table-column",{attrs:{prop:"name",label:"修改/删除"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticClass:"c-light pointer",attrs:{type:"text"},on:{click:function(n){return e.changeVersion(t.row,t.$index)}}},[e._v("\n                    修改\n                  ")]),n("span",{staticClass:"c-light pointer",attrs:{type:"text"},on:{click:function(n){return e.deleteVersion(t.$index,t.row,e.versionList)}}},[e._v("\n                    删除\n                  ")])]}}])})],1)],1)]],2)],1)])],1)},Kn=[],Yn=n("f753"),Gn=n.n(Yn),Wn=n("db49"),Jn={name:"ReleaseManage",components:{megTitle:S},directives:{focus:{inserted:function(e){e.querySelector("input").focus()}}},mixins:[I],data:function(){return{isUpdate:!1,isUpdateVersion:!1,newSdkVisible:!1,updaVersionVisible:!1,showNameSpace:!0,nameSpaceValue:1,currentNamespaceId:1,currentSdkTypeId:1,currentSdkId:"",index:"",text:"",form:{},tableForm:{},list:[],visible:!0,versionName:"",nameSpaces:[],versionList:[],addRules:{name:[{required:!0,message:"请输入SDK名称",trigger:"blur"}]},addSdkRules:{version:[{required:!0,message:"请输入SDK版本",trigger:"blur"}],type:[{required:!0,message:"请输入版本类型",trigger:"blur"}]},uploadUrl:"",uploadHeader:{}}},computed:{showList:function(){var e=this,t=[];return t=""===this.text?this.list:this.list.filter(function(t){return t.sdk_type_name.indexOf(e.text)>-1}),t}},mounted:function(){var e=this;this.$service.releaseManage.getList({admin_id:this.$store.getters["user/getAdminId"]}).then(function(t){console.log(t),200===t.status&&(e.nameSpaces=t.data)}).catch(function(e){console.log(e)}),this.$service.releaseManage.getSdk({admin_id:this.$store.getters["user/getAdminId"],namespace_id:1}).then(function(t){console.log(t),200===t.status&&(e.list=t.data)}).catch(function(e){console.log(e)}),this.$service.releaseManage.getSdkVersion({admin_id:this.$store.getters["user/getAdminId"],namespace_id:1,sdk_type_id:1}).then(function(t){console.log(t),e.versionList=t.data}).catch(function(e){console.log(e)})},methods:{choose:function(){this.isUpdate?this.updateSdk():this.addSdk()},chooseVersion:function(){this.isUpdateVersion?this.updateVersion():this.addSdkVersion()},changeNameSpace:function(e){var t=this;this.currentNamespaceId=e,this.$service.releaseManage.getSdk({admin_id:this.$store.getters["user/getAdminId"],namespace_id:this.currentNamespaceId}).then(function(e){console.log(e),200===e.status&&(t.list=e.data)}).catch(function(e){console.log(e)})},addSdk:function(){var e=this;this.$service.releaseManage.createSdk({name:this.form.name,admin_id:this.$store.getters["user/getAdminId"],namespace_id:this.currentNamespaceId}).then(function(t){200===t.status&&(console.log("新增SDK产品成功"),e.newSdkVisible=!1,console.log(t),e.list.push(t.data))}).catch(function(e){console.log("新增SDK产品失败"),console.log(e)})},changeSDK:function(e,t){this.index=t,this.isUpdate=!0,this.currentSdkTypeId=e,this.newSdkVisible=!0,this.form.name=this.list[this.index].sdk_type_name},updateSdk:function(){var e=this;this.$service.releaseManage.updateSdk({admin_id:this.$store.getters["user/getAdminId"],sdk_type_id:this.currentSdkTypeId,name:this.form.name}).then(function(t){200===t.status&&(console.log("修改SDK产品成功"),e.newSdkVisible=!1,e.list[e.index].sdk_type_name=e.form.name,console.log(t))}).catch(function(e){console.log("修改SDK产品失败"),console.log(e)})},open:function(e,t){var n=this;this.versionList="",this.$service.releaseManage.getSdkVersion({admin_id:this.$store.getters["user/getAdminId"],namespace_id:this.currentNamespaceId,sdk_type_id:e}).then(function(a){200===a.status&&(console.log(a),n.currentSdkTypeId=e,n.versionList=a.data,n.versionName=t)}).catch(function(e){console.log(e)})},addSdkVersion:function(){var e=this;this.$service.releaseManage.createSdkVersion({admin_id:this.$store.getters["user/getAdminId"],namespace_id:this.currentNamespaceId,sdk_type_id:this.currentSdkTypeId,version:this.tableForm.version}).then(function(t){200===t.status&&(console.log(t),e.updaVersionVisible=!1,e.versionList.push(t.data))}).catch(function(e){console.log(e)})},download:function(){},upload:function(e){this.currentSdkId=e.sdk_id,this.uploadUrl=Wn.serviceUrl+"/admin/"+this.$store.getters["user/getAdminId"]+"/api/v1/sdks/"+this.currentSdkId+"/upload",console.log(this.uploadUrl)},myUpload:function(e){var t=this,n=new FormData;n.append("file",e.file);var a={headers:{"Content-Type":"multipart/form-data"}};console.log("uploading"),Gn.a.put(e.action,n,a).then(function(e){200===e.status&&(t.$message({message:"sdk文件上传成功",type:"success"}),console.log("上传成功"),console.log(e))}).catch(function(e){t.$message({message:"sdk文件上传失败",type:"warning"}),console.log(e),console.log("上传失败")})},changeVersion:function(e,t){this.isUpdateVersion=!0,this.index=t,this.currentSdkId=e.sdk_id,this.updaVersionVisible=!0,this.tableForm.version=this.versionList[this.index].sdk_version,this.tableForm.type=this.versionList[this.index].release_version_type},updateVersion:function(){var e=this;this.$service.releaseManage.updateSdkVersion({admin_id:this.$store.getters["user/getAdminId"],sdk_id:this.currentSdkId,version:this.tableForm.version}).then(function(t){200===t.status&&(console.log(t),console.log("修改成功"),e.updaVersionVisible=!1,e.versionList[e.index].sdk_version=e.tableForm.version,e.versionList[e.index].release_version_type=e.tableForm.type)}).catch(function(e){console.log("修改失败"),console.log(e)})},deleteVersion:function(e,t,n){var a=this;this.$confirm("确定删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){console.log(t),console.log(n),a.currentSdkId=t.sdk_id,a.$service.releaseManage.deleteSdkVersion({admin_id:a.$store.getters["user/getAdminId"],sdk_id:a.currentSdkId,status:"INACTIVE"}).then(function(t){200===t.status&&(console.log(t),console.log("删除成功"),n.splice(e,1))}).catch(function(e){console.log("删除失败"),console.log(e)})})}}},Qn=Jn,Xn=Object(p["a"])(Qn,Hn,Kn,!1,null,"579a6d3e",null),Zn=Xn.exports,ea=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"dbv1",attrs:{"element-loading-text":"数据加载中"}})},ta=[],na={data:function(){return{loading:!0}},mounted:function(){console.log(this.$route.path)},beforeRouteEnter:function(e,t,n){n(function(e){e.$service.login.needLogin().then(function(n){console.log(n),e.loading=!1,n.data.need_login?t.query?e.$router.push({path:"/login",query:t.query}):e.$router.push({name:"login"}):e.enterSystem()})})},methods:{enterSystem:function(){var e=this.$store.getters["menu/getMenuList"][0].router;this.$router.push({name:e})}}},aa=na,sa=Object(p["a"])(aa,ea,ta,!1,null,null,null),ia=sa.exports;a["default"].use(o["a"]);var oa=[],ra=n("f1c5");ra.keys().forEach(function(e){var t=ra(e);oa=oa.concat(t.default)});var la=new o["a"]({routes:[{path:"/",name:"home",component:ia},{path:"/login",name:"login",component:ae},{path:"/layout",name:"layout",component:G,children:[{path:"/message",name:"message",component:N},{path:"/userInfo",name:"userInfo",component:he},{path:"/downloadCenter",name:"downloadCenter",component:Le},{path:"/statistical",name:"statistical",component:Ft},{path:"/log",name:"log",component:Bt},{path:"/userManage",name:"userManage",component:In},{path:"/softManage",name:"softManage",component:En},{path:"/namespaceManage",name:"namespaceManage",component:qn},{path:"/releaseManage",name:"releaseManage",component:Zn}]}]}),ca=(n("2ed4"),n("139c"),"/"),ua=Gn.a.create({baseURL:ca,timeout:1e3}),da=function(e){403===e&&(window.location.href=window.location.origin)};ua.interceptors.response.use(function(e){return da(e.status),e},function(e){return da(e.response.status),Promise.reject(e)});var ma=ua,pa={getMessages:function(e){return ma.get("/consumers/".concat(e.user_id,"/api/v1/messages"))}},fa={getUserInfo:function(e){return ma.get("/consumers/".concat(e.user_id,"/api/v1/account"))},editUserInfo:function(e){return ma.put("/consumers/".concat(e.user_id,"/api/v1/account"),{current_pwd:e.current_pwd,new_pwd:e.new_pwd})}},ha={getSdktTypesHis:function(e){return ma.get("/consumers/".concat(e.consumer_id,"/api/v1/sdk-types"))},getSdktTypesNew:function(e){return ma.get("/consumers/".concat(e.consumer_id,"/api/v1/sdk-types/sdks?release-version=release"))},getSdktTypesNewTest:function(e){return ma.get("/consumers/".concat(e.consumer_id,"/api/v1/sdk-types/sdks?release-version=test"))},getSdkHis:function(e){return ma.get("/consumers/".concat(e.consumer_id,"/api/v1/sdk-types/").concat(e.sdk_type_id,"/sdks"))},download:function(e){return ma.get("/admin/".concat(e.admin_id,"/api/v1/sdks/").concat(e.sdk_id,"/download"))}},ga={getStatisticallist:function(e){return ma.get("/consumers/".concat(e.consumer_id,"/api/v1/contracts"))},userGetConsumption:function(e){return ma.get("/consumers/".concat(e.consumer_id,"/api/v1/contracts/").concat(e.contract_id,"/consume-statistics"),{params:{"group-by":e.group_by,from:e.start_time,to:e.end_time}})},adminGetConsumption:function(e){return ma.get("/admin/".concat(e.admin_id,"/consumers/").concat(e.consumer_id,"/api/v1/contracts/").concat(e.contract_id,"/consume-statistics?group-by=").concat(e.group_by,"&from=").concat(e.start_time,"&to=").concat(e.end_time))},userGetChangeHistory:function(e){return ma.get("/consumers/".concat(e.consumer_id,"/api/v1/contracts/").concat(e.contract_id,"/change-history"))},adminGetChangeHistory:function(e){return ma.get("/admin/".concat(e.admin_id,"/consumers/").concat(e.consumer_id,"/api/v1/contracts/").concat(e.contract_id,"/change-history"))},addStatistical:function(e){return ma.put("/admin/".concat(e.admin_id,"/consumers/").concat(e.consumer_id,"/api/v1/contracts/").concat(e.contract_id),{change_num:e.change_num,change_reason:e.change_reason})},adminSingleAuthentication:function(e){return ma.get("/admin/".concat(e.admin_id,"/consumers/").concat(e.consumer_id,"/api/v1/contracts/").concat(e.contract_id,"/single-authentication"))},userSingleAuthentication:function(e){return ma.get("/consumers/".concat(e.consumer_id,"/api/v1/contracts/").concat(e.contract_id,"/single-authentication"))},adminDoubleAuthentication:function(e){return ma.get("/admin/".concat(e.admin_id,"/consumers/").concat(e.consumer_id,"/api/v1/contracts/").concat(e.contract_id,"/double-authentication"))},userDoubleAuthentication:function(e){return ma.get("/consumers/".concat(e.consumer_id,"/api/v1/contracts/").concat(e.contract_id,"/double-authentication"))},adminSingleAuthenticationPut:function(e){return ma.put("/admin/".concat(e.admin_id,"/consumers/").concat(e.consumer_id,"/api/v1/contracts/").concat(e.contract_id,"/single-authentication"))},userSingleAuthenticationPut:function(e){return ma.put("/consumers/".concat(e.consumer_id,"/api/v1/contracts/").concat(e.contract_id,"/single-authentication"))},adminDoubleAuthenticationPut:function(e){return ma.put("/admin/".concat(e.admin_id,"/consumers/").concat(e.consumer_id,"/api/v1/contracts/").concat(e.contract_id,"/double-authentication"))},userDoubleAuthenticationPut:function(e){return ma.put("/consumers/".concat(e.consumer_id,"/api/v1/contracts/").concat(e.contract_id,"/double-authentication"))},adminDoubleAuthenticationActiveCode:function(e){return ma.get("/admin/".concat(e.admin_id,"/consumers/").concat(e.consumer_id,"/api/v1/contracts/").concat(e.contract_id,"/double-authentication-active-code"))},userDoubleAuthenticationActiveCode:function(e){return ma.get("/consumers/".concat(e.consumer_id,"/api/v1/contracts/").concat(e.contract_id,"/double-authentication-active-code"))},adminConsumeStatisticsExport:function(e){return ma.get("/admin/".concat(e.admin_id,"/consumers/").concat(e.consumer_id,"/api/v1/contracts/").concat(e.contract_id,"/consume-statistics-export?group-by=").concat(e.group_by,"&from=").concat(e.start_time,"&to=").concat(e.end_time))},userConsumeStatisticsExport:function(e){return ma.get("/consumers/".concat(e.consumer_id,"/api/v1/contracts/").concat(e.contract_id,"/consume-statistics-export?group-by=").concat(e.group_by,"&from=").concat(e.start_time,"&to=").concat(e.end_time))},addContracts:function(e){return ma.post("/admin/".concat(e.admin_id,"/consumers/").concat(e.consumer_id,"/api/v1/contracts"),{sdk_type_id:e.sdk_type_id,contract_type:e.contract_type,authorized_days:e.authorized_days,purchased_count:e.purchased_count,node:e.node})}},ba={getSdktTypesHis:function(e){return ma.get("/admin/".concat(e.admin_id,"/consumers/").concat(e.consumer_id,"/api/v1/sdk-types?search-by=").concat(e.push))},getSdktTypesNew:function(e){return ma.get("/admin/".concat(e.admin_id,"/consumers/").concat(e.consumer_id,"/api/v1/sdk-types/sdks?release-version=release&search-by=").concat(e.push))},getSdktTypesNewTest:function(e){return ma.get("/admin/".concat(e.admin_id,"/consumers/").concat(e.consumer_id,"/api/v1/sdk-types/sdks?release-version=test&search-by=").concat(e.push))},getSdkHis:function(e){return ma.get("/admin/".concat(e.admin_id,"/consumers/").concat(e.consumer_id,"/api/v1/sdk-types/").concat(e.sdk_type_id,"/sdks?search-by=").concat(e.push))},getUserList:function(e){return ma.get("/admin/".concat(e.admin_id,"/api/v1/consumers"),{params:{"search-by":e.search_by,"split-by-pushed-sdk-id":e.splitByPushedSdkId}})},pushSdk:function(e){return ma.post("/admin/".concat(e.admin_id,"/consumers/").concat(e.consumer_id,"/api/v1/push-sdks"),{sdk_ids:e.sdk_ids})},resetPassword:function(e){return ma.put("/admin/".concat(e.admin_id,"/consumers/").concat(e.consumer_id,"/api/v1/revoke-pwd"))},editUser:function(e){return ma.put("/admin/".concat(e.admin_id,"/consumers/").concat(e.consumer_id,"/api/v1/account"),{name:e.name,email:e.email,phone_number:e.phone_number,company_name:e.company_name,describe:e.describe})}},va={getSdktTypesHis:function(e){return ma.get("/admin/".concat(e.admin_id,"/api/v1/namespaces/").concat(e.namespaces_id,"/sdk-types"))},getSdktTypesNew:function(e){return ma.get("/admin/".concat(e.admin_id,"/api/v1/namespaces/").concat(e.namespaces_id,"/sdk-types/sdks?release-version=release"))},getSdktTypesNewTest:function(e){return ma.get("/admin/".concat(e.admin_id,"/api/v1/namespaces/").concat(e.namespaces_id,"/sdk-types/sdks?release-version=test"))},getSdkHis:function(e){return ma.get("/admin/".concat(e.admin_id,"/api/v1/namespaces/").concat(e.namespaces_id,"/sdk-types/").concat(e.sdk_type_id,"/sdks"))},pushToConsumers:function(e){return ma.post("/admin/".concat(e.admin_id,"/api/v1/sdks/").concat(e.sdk_id,"/push-to-consumers"),{consumer_ids:e.consumer_ids})}},_a={getList:function(e){return ma.get("/admin/".concat(e.admin_id,"/api/v1/namespaces"))},creat:function(e){return ma.post("/admin/".concat(e.admin_id,"/api/v1/namespaces"),{name:e.name})},delete:function(e){return ma.delete("/admin/".concat(e.admin_id,"/api/v1/namespaces/").concat(e.namespace_id))},update:function(e){return ma.put("/admin/".concat(e.admin_id,"/api/v1/namespaces/").concat(e.namespace_id),{name:e.name,owners:e.owners,writers:e.writers,supporters:e.supporters})},addOwener:function(e){return ma.put("/admin/".concat(e.admin_id,"/api/v1/namespaces/").concat(e.namespace_id),{owner_id:e.owner_id})}},ya={getList:function(e){return ma.get("/admin/".concat(e.admin_id,"/api/v1/namespaces"))},getSdk:function(e){return ma.get("/admin/".concat(e.admin_id,"/api/v1/namespaces/").concat(e.namespace_id,"/sdk-types"))},getSdkVersion:function(e){return ma.get("/admin/".concat(e.admin_id,"/api/v1/namespaces/").concat(e.namespace_id,"/sdk-types/").concat(e.sdk_type_id,"/sdks"))},createSdk:function(e){return ma.post("/admin/".concat(e.admin_id,"/api/v1/sdk-types"),{name:e.name,namespace_id:e.namespace_id})},updateSdk:function(e){return ma.put("/admin/".concat(e.admin_id,"/api/v1/sdk-types/").concat(e.sdk_type_id),{name:e.name})},createSdkVersion:function(e){return ma.post("/admin/".concat(e.admin_id,"/api/v1/namespaces/").concat(e.namespace_id,"/sdk-types/").concat(e.sdk_type_id,"/sdks"),{version:e.version,type:e.type,release_node:e.release_node})},uploadSdkVersion:function(e){return ma.put("/admin/".concat(e.admin_id,"/api/v1/sdks/").concat(e.sdk_id,"/upload"),{file:e.file})},updateSdkVersion:function(e){return ma.put("/admin/".concat(e.admin_id,"/api/v1/sdks/").concat(e.sdk_id),{version:e.version})},deleteSdkVersion:function(e){return ma.put("/admin/".concat(e.admin_id,"/api/v1/sdks/").concat(e.sdk_id,"/status"),{status:e.status})}},wa={login:function(e){return ma.post("/consumers/login",{uname:e.uname,password:e.password})},megviiLogin:function(){return ma.get("/api/v1/oauth2_login")},needLogin:function(){return ma.get("/consumers/need_login")},getShortMessage:function(e){return ma.post("/consumers/get-short-message",{uname:e.uname,password:e.password})},loginShortMessage:function(e){return ma.post("/consumers/login-short-message",{uname:e.uname,password:e.password,short_msg:e.short_msg})}},ka={getList:function(e){return ma.get("admin/".concat(e.amdin_id,"/api/v1/event-records?search-by=").concat(e.name,"&type=").concat(e.type))},getUserList:function(e){return ma.get("/admin/".concat(e.amdin_id,"/consumers/").concat(e.consumer_id,"/api/v1/account-log"))},getEventTypes:function(e){return ma.get("/admin/".concat(e.amdin_id,"/api/v1/event-types"))}},Sa={userManage:ba,login:wa,userInfo:fa,message:pa,downloadCenter:ha,statistical:ga,softManage:va,namespaceManage:_a,releaseManage:ya,log:ka},Ca=n("591a"),xa={getCookie:function(e){for(var t=e+"=",n=document.cookie.split(";"),a=0;a<n.length;a++){var s=n[a].trim();if(0===s.indexOf(t))return s.substring(t.length,s.length)}return""}},Ia={namespaced:!0,state:{userInfo:{},userRole:{}},getters:{getUserInfo:function(){return Z.getStore("userInfo")},getUserRole:function(){return Z.getStore("userRole")},getAdminId:function(){return xa.getCookie("admin_id")||Z.getStore("userInfo").id}},mutations:{setUserInfo:function(e,t){e.userInfo=t,Z.setStore("userInfo",t)},setUserRole:function(e,t){e.userRole=t,Z.setStore("userRole",t)}}},$a=(n("3b54"),n("3cb6"),n("4964")),Ta={namespaced:!0,state:{userInfo:{},menuList:[{index:0,name:"消息中心",icon:"icon-message",router:"message"},{index:1,name:"账号信息",icon:"icon-user-info",router:"userInfo"},{index:2,name:"下载中心",icon:"icon-upload",router:"downloadCenter"},{index:3,name:"授权统计",icon:"icon-tongji",router:"statistical"},{index:4,name:"日志审计",icon:"icon-rizhi",router:"log",role:["SUPER_ADMIN"]},{index:5,name:"客户管理",icon:"icon-yonghuguanli",router:"userManage",role:["SUPER_ADMIN","NAMESPACE_SUPPORTER"]},{index:6,name:"软件管理",icon:"icon-ruanjianfuwu1",router:"softManage",role:["SUPER_ADMIN","NAMESPACE_SUPPORTER"]},{index:7,name:"分区管理",icon:"icon-zuzhi",router:"namespaceManage",role:["SUPER_ADMIN","NAMESPACE_OWNER"]},{index:8,name:"发布管理",icon:"icon-fabu",router:"releaseManage",role:["SUPER_ADMIN","NAMESPACE_OWNER","NAMESPACE_WRITER"]}]},getters:{getMenuList:function(e){return e.menuList}},mutations:{setMenuList:function(e,t){if(console.log(e.menuList),console.log(t),0===t.length)e.menuList=e.menuList.slice(0,4),console.log(e.menuList);else{var n=e.menuList.slice(4,9);console.log(n),-1!==t.indexOf("SUPER_ADMIN")&&n.push.apply(n,Object($a["a"])(e.menuList.slice(4))),-1!==t.indexOf("NAMESPACE_OWNER")&&n.push.apply(n,Object($a["a"])(e.menuList.slice(7,9))),-1!==t.indexOf("NAMESPACE_WRITER")&&n.push.apply(n,Object($a["a"])(e.menuList.slice(8,9))),-1!==t.indexOf("NAMESPACE_SUPPORTER")&&n.push.apply(n,Object($a["a"])(e.menuList.slice(5,7))),e.menuList=Object($a["a"])(new Set(n)),console.log(e.menuList)}}}};a["default"].use(Ca["a"]);var Da=new Ca["a"].Store({modules:{user:Ia,menu:Ta}}),Na=n("0e4e"),Fa={login:{login:"登录",userLogin:"用户登录",userName:"用户名",password:"密码",forgotPassword:"忘记密码"}},Pa={login:{login:"Login",userLogin:"User Login",userName:"User Name",password:"Password",forgotPassword:"Forgot password"}},Ma=n("9f62"),Oa=n.n(Ma),Ua=n("8489"),Va=n.n(Ua),Aa={select:{contractType:[{label:"正式",value:1},{label:"测试",value:0}]}},Ea={select:{contractType:[{label:"正式",value:1},{label:"测试",value:0}]}};a["default"].use(Na["a"]);var La=Z.getStore("lang"),ja=new Na["a"]({locale:La||"zh-CN",messages:{"zh-CN":Object(Q["a"])({},Fa,Va.a,Aa),"en-US":Object(Q["a"])({},Pa,Oa.a,Ea)}});a["default"].config.productionTip=!1,a["default"].use(i.a,{i18n:function(e,t){return ja.t(e,t)}}),a["default"].use(l.a),a["default"].prototype.$service=Sa,a["default"].use(o["a"]),la.beforeEach(function(e,t,n){console.log("........."),console.log(e.name+t.name),"login"===e.name||"home"===e.name?n():Sa.login.needLogin().then(function(e){e.data.need_login?n({name:"login"}):n()})}),la.beforeEach(function(e,t,n){if("home"===e.name){console.log("...................");var a=[];"true"===window.$cookies.get("megvii_user")?(console.log("管理员menu设置"),a=String(window.$cookies.get("user_role")).split("."),Da.commit("menu/setMenuList",a)):(console.log("普通用户menu设置"),Da.commit("menu/setMenuList",a)),n()}else n()}),new a["default"]({router:la,store:Da,i18n:ja,render:function(e){return e(h)}}).$mount("#app")},"7ffb":function(e,t,n){},db49:function(e,t,n){e.exports={port:9900,serviceUrl:"http://10.122.104.47:3040"}},e703:function(e,t,n){"use strict";var a=n("04b0"),s=n.n(a);s.a},ebb1:function(e,t,n){"use strict";var a=n("7ffb"),s=n.n(a);s.a},f1c5:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="f1c5"}});
//# sourceMappingURL=app.b4e4fb44.js.map